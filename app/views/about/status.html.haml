- title "Status"
.container
  %h1 Status
  - if @worker_status
    %h2 Worker Status
    %table.table
      %thead
        %tr
          %th Group
          %th Worker ID
          %th Status
          %th Uptime
      %tbody
        - @worker_status["active_node_ids"].each.with_index(1) do |node_id, i|
          - if node_id
            %tr
              %td= i
              %td ##{node_id}
              %td Running
              %td #{(Time.now.to_i - @worker_status["nodes"][node_id]["activated_at"]) / 60} minutes
          - else
            %tr.danger
              %td= i
              %td -
              %td Down
              %td -
        - @worker_status["inactive_node_ids"].each.with_index(1) do |node_id, i|
          %tr
            %td -
            %td ##{node_id}
            %td Idle
            %td -
    - if logged_in?
      - if your_node_id = @worker_status["active_node_ids"][current_user.account.worker_number]
        %p Worker ##{your_node_id} is assigned to your account.
      - else
        %p Worker for group #{current_user.account.worker_number} is currently down.
  - else
    .alert.alert-danger
      %strong The collector service is down.
